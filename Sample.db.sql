BEGIN TRANSACTION;
DROP TABLE IF EXISTS `RulePremise`;
CREATE TABLE IF NOT EXISTS `RulePremise` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`RuleID`	INTEGER NOT NULL,
	`PremiseID`	INTEGER NOT NULL,
	`AnswerID`	INTEGER NOT NULL,
	FOREIGN KEY(`RuleID`) REFERENCES `Rule`(`ID`),
	FOREIGN KEY(`AnswerID`) REFERENCES `Answer`(`ID`),
	FOREIGN KEY(`PremiseID`) REFERENCES `Premise`(`ID`)
);
INSERT INTO `RulePremise` (ID,RuleID,PremiseID,AnswerID) VALUES (1,1,1,1),
 (2,1,2,1),
 (3,2,2,1);
DROP TABLE IF EXISTS `Rule`;
CREATE TABLE IF NOT EXISTS `Rule` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
	`ExpertID`	INTEGER NOT NULL,
	`Conclusion`	TEXT NOT NULL,
	`AnswerID`	INTEGER NOT NULL,
	FOREIGN KEY(`ExpertID`) REFERENCES `Expert`(`ID`),
	FOREIGN KEY(`AnswerID`) REFERENCES `Answer`(`ID`)
);
INSERT INTO `Rule` (ID,ExpertID,Conclusion,AnswerID) VALUES (1,1,'beasiswa',1),
 (2,1,'beasiswa',1);
DROP TABLE IF EXISTS `PremiseRule`;
CREATE TABLE IF NOT EXISTS `PremiseRule` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`PremiseID`	INTEGER NOT NULL,
	`RulePremiseID`	INTEGER NOT NULL,
	FOREIGN KEY(`PremiseID`) REFERENCES `Premise`(`ID`),
	FOREIGN KEY(`RulePremiseID`) REFERENCES `Rule`(`ID`)
);
DROP TABLE IF EXISTS `PremiseAnswerList`;
CREATE TABLE IF NOT EXISTS `PremiseAnswerList` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`PremiseID`	INTEGER NOT NULL,
	`AnswerID`	INTEGER NOT NULL,
	FOREIGN KEY(`AnswerID`) REFERENCES `Answer`(`ID`),
	FOREIGN KEY(`PremiseID`) REFERENCES `Premise`(`ID`) ON UPDATE RESTRICT ON DELETE RESTRICT
);
INSERT INTO `PremiseAnswerList` (ID,PremiseID,AnswerID) VALUES (1,1,1),
 (2,1,2),
 (3,2,2),
 (4,2,1);
DROP TABLE IF EXISTS `Premise`;
CREATE TABLE IF NOT EXISTS `Premise` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`ExpertID`	INTEGER NOT NULL,
	`Name`	INTEGER NOT NULL,
	`Question`	TEXT NOT NULL,
	FOREIGN KEY(`ExpertID`) REFERENCES `Expert`(`ID`)
);
INSERT INTO `Premise` (ID,ExpertID,Name,Question) VALUES (1,1,'akademik','akademik terpenuhi'),
 (2,1,'finansial','finansial terpenuhi ?');
DROP TABLE IF EXISTS `Expert`;
CREATE TABLE IF NOT EXISTS `Expert` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`Name`	TEXT NOT NULL UNIQUE,
	`Description`	TEXT
);
INSERT INTO `Expert` (ID,Name,Description) VALUES (1,'test','test database');
DROP TABLE IF EXISTS `Answer`;
CREATE TABLE IF NOT EXISTS `Answer` (
	`ID`	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	`ExpertID`	INTEGER NOT NULL,
	`Value`	TEXT NOT NULL,
	FOREIGN KEY(`ExpertID`) REFERENCES `Expert`(`ID`)
);
INSERT INTO `Answer` (ID,ExpertID,Value) VALUES (1,1,'ya'),
 (2,1,'tidak');
COMMIT;
